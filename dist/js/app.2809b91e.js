(function(){"use strict";var e={651:function(e,t,n){var o=n(9963),a=n(6252);function r(e,t,n,o,r,s){const l=(0,a.up)("home-view"),i=(0,a.up)("router-view");return(0,a.wg)(),(0,a.iD)(a.HY,null,[(0,a.Wm)(l),(0,a.Wm)(i)],64)}const s=e=>((0,a.dD)("data-v-0caaa9d7"),e=e(),(0,a.Cn)(),e),l={id:"home-view"},i={class:"names"},d={class:"name-display"},c=s((()=>(0,a._)("input",{type:"submit",value:"",class:"name-submit"},null,-1)));function m(e,t,n,r,s,m){const u=(0,a.up)("router-link"),p=(0,a.up)("RouterLink");return(0,a.wg)(),(0,a.iD)("div",l,[(0,a._)("nav",null,[(0,a.Wm)(u,{to:"/"},{default:(0,a.w5)((()=>[(0,a.Uk)("Home")])),_:1}),(0,a.Uk)(" | "),(0,a.Wm)(u,{to:"/about"},{default:(0,a.w5)((()=>[(0,a.Uk)("About")])),_:1})]),(0,a._)("div",i,[(0,a._)("div",d,[(0,a._)("form",{method:"post",onSubmit:t[1]||(t[1]=(0,o.iM)(((...e)=>m.login&&m.login(...e)),["prevent"]))},[(0,a.wy)((0,a._)("input",{type:"text","onUpdate:modelValue":t[0]||(t[0]=e=>s.playerOneName=e),name:"player-one-name",placeholder:"Name",autocomplete:"off",class:"name-input"},null,512),[[o.nr,s.playerOneName]]),c],32)]),(0,a.Wm)(p,{to:"/game"},{default:(0,a.w5)((()=>[(0,a.Uk)("Go to Game")])),_:1})])])}const u="player one",p="player two",y=9,g=9,h="continue",b="draw",f=10,w="initialize",S="new move",v="reset";var I=n(2262),_=n(6958);const P=window.location,O=(0,I.qj)({isConnected:!1,errorMessage:null,nextMove:{player:u,tileId:-1,gameStatus:null}}),G={autoConnect:!1},T=(0,_.io)(window.location,G);function B(){return T.connect(),console.log("Calling connect Socket. connexion status: "+O.isConnected),O.isConnected}function C(){return T.disconnect(),console.log("Disconnecting socket"),O.isConnected=!1,O.isConnected}function k(e,t,n){return!!(O.isConnected||!O.isConnected&&B())&&(T.emit(e,{tileId:t,boardId:n}),!0)}function E(e){T.on(w,(t=>{const{playerKey:n,playerSymbol:o,opponentSymbol:a,roomId:r}=t;console.log("initial data: "+t+" stringified: "+JSON.stringify(t)),e.playerStorageKey=n,e.playerSymbol=o,e.playerStorageKey===u?e.opponentKey=p:e.opponentKey=u,e.opponentSymbol=String(a),e.isPlayerTurn=e.playerStorageKey===u,e.setAllBoardEnableStatus(e.playerStorageKey===u),console.log("this player's storage key: "+e.playerStorageKey+" opponent symbol: "+a),localStorage.setItem("player key",n),localStorage.setItem("game room",r)}))}function D(e){T.on(S,(t=>{console.log("client New move received. moveInfo id: "+t.moveId);const{moveId:n,boardId:o,gameStatus:a}=t;e.nextBoardToPlay=n,e.metaGameState[n].isEnabled=!0,e.opponentMove={tileId:n,boardId:o},e.isPlayerTurn=!0,e.placeTile({tileId:n,boardId:o},!1),null!==a&&(e.setEndGameStatus(a),e.setAllBoardEnableStatus(!1))}))}function N(e){const t=P+"/login";let n=new Headers;n.append("Origin","no-cors"),fetch(t,{method:"POST",mode:"cors",headers:{"Content-Type":"text/plain"},body:e,headers:n}).then((e=>e.text())).then((e=>{console.log("response from server "+e)})).catch((e=>{console.log("error when posting login error msg: "+e.message)}))}T.on("connect_error",(e=>{O.isConnected=!1,console.log("failed to connect"),O.errorMessage=`error name: ${e.name}. error message: ${e.message}`})),T.on("connect",(()=>{if(O.isConnected=!0,console.log("client is connected. connexion status: "+O.isConnected),null!=localStorage.getItem("game room")){const e=localStorage.getItem("player key"),t={playerKey:e,gameId:localStorage.getItem("game room")};T.emit("rejoin",t)}})),T.on("disconnect",(()=>{O.isConnected=!1,console.log("client has disconnected"),null!=localStorage.getItem("game room")&&localStorage.removeItem("game room")}));var x={data(){return{playerOneName:"",newName:!1,newPlayerOneName:!1}},methods:{login(){console.log("calling post login. player one name "+this.playerOneName),N(this.playerOneName)}},mounted(){const e=sessionStorage.getItem(u);null!==e&&(this.playerOneName=e)},unmounted(){sessionStorage.setItem(u,this.playerOneName)}},K=n(3744);const W=(0,K.Z)(x,[["render",m],["__scopeId","data-v-0caaa9d7"]]);var M=W,A={components:{HomeView:M}};const j=(0,K.Z)(A,[["render",r]]);var q=j,U=n(2201),$=n(3577);const H=e=>((0,a.dD)("data-v-5f7bbe43"),e=e(),(0,a.Cn)(),e),Z={class:"player-controls"},z=H((()=>(0,a._)("label",{for:"player-one-symbol"},"Player One Custom Symbol",-1))),R=H((()=>(0,a._)("br",null,null,-1))),L=H((()=>(0,a._)("label",{for:"player-two-symbol"},"Player Two Custom Symbol",-1))),V={class:"game"},Y={key:0,class:"outcome-display"},J={class:"outcome-text"},F={class:"username"},X={class:"username"},Q=H((()=>(0,a._)("div",{class:"history"},[(0,a._)("ul",{class:"moves-list"})],-1)));function ee(e,t,n,r,s,l){const i=(0,a.up)("meta-board"),d=(0,a.up)("connect-display");return(0,a.wg)(),(0,a.iD)(a.HY,null,[(0,a._)("div",Z,[z,(0,a.wy)((0,a._)("input",{type:"text",name:"player-one-symbol",id:"player-one-symbol","onUpdate:modelValue":t[0]||(t[0]=e=>s.firstPlayer=e)},null,512),[[o.nr,s.firstPlayer]]),R,L,(0,a.wy)((0,a._)("input",{type:"text",name:"player-two-symbol",id:"player-two-symbol","onUpdate:modelValue":t[1]||(t[1]=e=>s.secondPlayer=e)},null,512),[[o.nr,s.secondPlayer]])]),(0,a._)("div",V,[null!==s.winner?((0,a.wg)(),(0,a.iD)("div",Y,[(0,a._)("p",J,(0,$.zw)(l.outcomeText),1),(0,a._)("button",{type:"button",onClick:t[2]||(t[2]=(...e)=>l.resetGame&&l.resetGame(...e)),class:"reset-button"}," Play Again ")])):(0,a.kq)("",!0),(0,a._)("p",F,(0,$.zw)(s.playerOneName),1),(0,a.Wm)(i,{onGameOver:t[3]||(t[3]=e=>l.gameOver(e)),onDraw:l.handleDraw,onResetted:l.finishReset,"player-one":s.firstPlayer,"player-two":s.secondPlayer,"reset-signal":s.resetSignal,class:"board"},null,8,["onDraw","onResetted","player-one","player-two","reset-signal"]),(0,a._)("p",X,(0,$.zw)(s.playerTwoName),1)]),Q,(0,a.Wm)(d)],64)}const te={class:"meta-board"};function ne(e,t,n,o,r,s){const l=(0,a.up)("GameBoard");return(0,a.wg)(),(0,a.iD)("div",null,[(0,a._)("div",te,[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(r.metaGameState,(e=>((0,a.wg)(),(0,a.j4)(l,{key:e.id,onTilePlaced:t[0]||(t[0]=e=>s.placeTile(e,!0)),onGameOver:t[1]||(t[1]=e=>s.setBoardStatus(e)),onDraw:t[2]||(t[2]=e=>s.setBoardStatus(e)),"opponent-player-symbol":r.opponentSymbol,"opponent-move":r.opponentMove,"client-player-symbol":r.playerSymbol,"reset-signal":n.resetSignal,"is-enabled":e.isEnabled,"board-id":e.id,class:"game-board"},null,8,["opponent-player-symbol","opponent-move","client-player-symbol","reset-signal","is-enabled","board-id"])))),128))])])}n(7658);const oe={class:"board-container"},ae={key:0,class:"end-display"};function re(e,t,n,o,r,s){const l=(0,a.up)("game-tile");return(0,a.wg)(),(0,a.iD)("div",oe,[(0,a._)("div",{class:(0,$.C_)(["game-board",{active:n.isEnabled}])},[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(r.GameBoard,(e=>((0,a.wg)(),(0,a.j4)(l,{key:e.id,ownerSymbol:e.owner,id:e.id,onPlaceTile:t=>s.placeTile(e.id,!0)},null,8,["ownerSymbol","id","onPlaceTile"])))),128))],2),null!==r.winner?((0,a.wg)(),(0,a.iD)("div",ae,(0,$.zw)(r.winner),1)):(0,a.kq)("",!0)])}function se(e,t,n,o,r,s){return(0,a.wg)(),(0,a.iD)("div",{class:"tile",onClick:t[0]||(t[0]=(...e)=>s.setOwner&&s.setOwner(...e))},(0,$.zw)(s.displaySymbol),1)}const le="";var ie={emits:["place-tile"],props:{ownerSymbol:{required:!0,type:String},id:{required:!0,type:String}},methods:{setOwner(){const e=this.id;this.ownerSymbol===e&&this.$emit("place-tile")}},computed:{displaySymbol(){return this.ownerSymbol===this.id?le:this.ownerSymbol}}};const de=(0,K.Z)(ie,[["render",se],["__scopeId","data-v-2508832b"]]);var ce=de;const me="D";var ue={components:{GameTile:ce},emits:["tile-placed","game-over","resetted"],props:{clientPlayerSymbol:{required:!0,type:String},opponentPlayerSymbol:{required:!0,type:String},opponentMove:{required:!0,type:Object},isEnabled:{default:!1,type:Boolean},boardId:{required:!0,type:Number},resetSignal:{default:!1,type:Boolean}},data(){let e=[];for(let t=0;t<g;t++)e.push({owner:String(t),id:String(t)});return{GameBoard:e,DRAW:me,winner:null,tilesPlaced:0}},methods:{resetBoard(){for(const e of this.GameBoard)e.owner=e.id;this.tilesPlaced=0,this.winner=null},placeTile(e,t){console.log("game board tile id: "+e);let n=this.GameBoard[e];n.owner!==n.id||null!==this.winner||!this.isEnabled&&t?console.log("failed to place tile. winner: "+this.winner+" is enabled: "+this.isEnabled+" and owner: "+n.owner):(this.tilesPlaced++,n.owner=t?this.clientPlayerSymbol:this.opponentPlayerSymbol,t&&this.$emit("tile-placed",{tileId:e,boardId:this.boardId}),this.winner=this.getWinner(),null!==this.winner&&this.$emit("game-over",{status:this.winner,boardId:this.boardId}))},getWinner(){if(this.tilesPlaced===g)return me;let e=[[0,1,2],[3,4,5],[6,7,8],[0,3,6],[1,4,7],[2,5,8],[0,4,8],[2,4,6]];for(const t of e){let e=!1,n=this.GameBoard[t[0]].owner;for(let o=0;o<t.length;o++){let a=this.GameBoard[t[o]].owner;if(e=a===n,!e)break}if(e)return n}return null}},watch:{resetSignal:function(e){e&&(this.resetBoard(),this.$emit("resetted"))},opponentMove:function(e){console.log("new opponent move: "+JSON.stringify(e));const{tileId:t,boardId:n}=e;n===this.boardId&&this.placeTile(Number(t),!1)}}};const pe=(0,K.Z)(ue,[["render",re],["__scopeId","data-v-223ca7a5"]]);var ye=pe;const ge=f;var he={components:{GameBoard:ye},emits:["game-over","resetted","draw"],props:{playerOne:{required:!0,type:String},playerTwo:{required:!0,type:String},resetSignal:{default:!1,type:Boolean}},data(){let e=[],t=[b,this.playerOne,this.playerTwo];for(let o=0;o<y;o++)e.push({id:o,isEnabled:!0,status:h});let n={tileId:-1,boardId:-1};return{metaGameState:e,endGameStates:t,startTimeSeconds:ge,opponentMove:n,opponentKey:"",opponentSymbol:"",isPlayerTurn:!1,playerStorageKey:"",playerSymbol:"",boardsInPlay:y,serverGameState:O,currentGameState:null,nextBoardToPlay:-1}},methods:{placeTile({tileId:e,boardId:t},n){this.nextBoardToPlay=Number(e);let o=this.metaGameState[this.nextBoardToPlay];if(this.setAllBoardEnableStatus(!0),console.log("meta board. nextboard status: "+o.status),!this.endGameStates.includes(o.status))for(let a=0;a<this.metaGameState.length;a++)this.metaGameState[a].isEnabled=this.nextBoardToPlay===a;console.log("Sending move"),n&&(k(this.playerStorageKey,e,t),this.isPlayerTurn=!1),!this.isPlayerTurn&&n&&this.setAllBoardEnableStatus(!1)},setBoardStatus(e){let t=Number(e.boardId);this.metaGameState[t].status=e.status,this.boardsInPlay--;const n=this.getWinner(this.boardsInPlay);this.endGameStates.includes(n)&&(this.setAllBoardEnableStatus(!1),this.setEndGameStatus(n))},getWinner(e){if(0===e)return b;let t=[[0,1,2],[3,4,5],[6,7,8],[0,3,6],[1,4,7],[2,5,8],[0,4,8],[2,4,6]];for(const n of t){let e=!1,t=this.metaGameState[n[0]].status;for(let o=0;o<n.length;o++){let a=this.metaGameState[n[o]].status;if(e=a===t,!e)break}if(e)return t}return null},handleTimeLoss(e){e===this.playerOne?this.setEndGameStatus(this.playerTwo):e===this.playerTwo&&this.setEndGameStatus(this.playerOne),this.setAllBoardEnableStatus(!1)},setEndGameStatus(e){this.currentGameState=e},setAllBoardEnableStatus(e){for(const t of this.metaGameState)t.isEnabled=e}},watch:{currentGameState:function(e){if(null!==e){const t=e===b?b:"game-over";this.$emit(t,e)}},resetSignal:function(e){if(e){for(const e of this.metaGameState)e.status=h,e.isEnabled=!0;this.playerOneTurn=this.playerStorageKey===u,this.boardsInPlay=y,this.nextBoardToPlay=-1,T.emit(v),this.setEndGameStatus(null),this.$emit("resetted")}}},mounted(){E(this),D(this)}};const be=(0,K.Z)(he,[["render",ne],["__scopeId","data-v-ec15f4f8"]]);var fe=be;const we={class:"connected-display"};function Se(e,t,n,o,r,s){return(0,a.wg)(),(0,a.iD)("footer",we,(0,$.zw)(s.connectedMessage),1)}var ve={data(){return{isConnected:O.isConnected}},computed:{connectedMessage(){let e=O.isConnected?"Connected: ✔️":"Disconnected ❌";return console.log("connect display connected status: "+O.isConnected+" and msg: "+e),e}}};const Ie=(0,K.Z)(ve,[["render",Se],["__scopeId","data-v-4eeae40e"]]);var _e=Ie;const Pe="X",Oe="O";var Ge={components:{MetaBoard:fe,ConnectDisplay:_e},data(){return{winner:null,resetSignal:!1,playerOneName:Pe,playerTwoName:Oe,firstPlayer:Pe,secondPlayer:Oe,numTiles:9}},methods:{gameOver(e){this.winner=e,console.log("GAME OVER CALLLED "+e)},handleDraw(){this.winner="draw"},resetGame(){this.winner=null,this.resetSignal=!0,this.firstPlayer=Pe,this.secondPlayer=Oe},finishReset(){this.resetSignal=!1}},computed:{outcomeText(){let e="";return e=this.winner===this.firstPlayer?this.playerOneName:this.playerTwoName,`${e} has won!`}},mounted(){u in sessionStorage&&(this.playerOneName=sessionStorage.getItem(u)),p in sessionStorage&&(this.playerTwoName=sessionStorage.getItem(p)),B()},unmounted(){C()}};const Te=(0,K.Z)(Ge,[["render",ee],["__scopeId","data-v-5f7bbe43"]]);var Be=Te;const Ce=(0,a._)("p",null," Ultimate Tic Tac Toe Game! ",-1),ke=(0,a._)("br",null,null,-1);function Ee(e,t){const n=(0,a.up)("router-link");return(0,a.wg)(),(0,a.iD)("main",null,[Ce,(0,a.Wm)(n,{to:"/game"},{default:(0,a.w5)((()=>[(0,a.Uk)("Game")])),_:1}),ke,(0,a.Wm)(n,{to:"/"},{default:(0,a.w5)((()=>[(0,a.Uk)("Home")])),_:1})])}const De={},Ne=(0,K.Z)(De,[["render",Ee]]);var xe=Ne;const Ke=[{path:"/",component:M},{path:"/game",component:Be},{path:"/about",component:xe}],We=(0,U.p7)({history:(0,U.PO)("/"),routes:Ke});var Me=We;(0,o.ri)(q).use(Me).mount("#app")}},t={};function n(o){var a=t[o];if(void 0!==a)return a.exports;var r=t[o]={exports:{}};return e[o].call(r.exports,r,r.exports,n),r.exports}n.m=e,function(){var e=[];n.O=function(t,o,a,r){if(!o){var s=1/0;for(c=0;c<e.length;c++){o=e[c][0],a=e[c][1],r=e[c][2];for(var l=!0,i=0;i<o.length;i++)(!1&r||s>=r)&&Object.keys(n.O).every((function(e){return n.O[e](o[i])}))?o.splice(i--,1):(l=!1,r<s&&(s=r));if(l){e.splice(c--,1);var d=a();void 0!==d&&(t=d)}}return t}r=r||0;for(var c=e.length;c>0&&e[c-1][2]>r;c--)e[c]=e[c-1];e[c]=[o,a,r]}}(),function(){n.d=function(e,t){for(var o in t)n.o(t,o)&&!n.o(e,o)&&Object.defineProperty(e,o,{enumerable:!0,get:t[o]})}}(),function(){n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){var e={143:0};n.O.j=function(t){return 0===e[t]};var t=function(t,o){var a,r,s=o[0],l=o[1],i=o[2],d=0;if(s.some((function(t){return 0!==e[t]}))){for(a in l)n.o(l,a)&&(n.m[a]=l[a]);if(i)var c=i(n)}for(t&&t(o);d<s.length;d++)r=s[d],n.o(e,r)&&e[r]&&e[r][0](),e[r]=0;return n.O(c)},o=self["webpackChunktic_tac_toe_ui"]=self["webpackChunktic_tac_toe_ui"]||[];o.forEach(t.bind(null,0)),o.push=t.bind(null,o.push.bind(o))}();var o=n.O(void 0,[998],(function(){return n(651)}));o=n.O(o)})();
//# sourceMappingURL=app.2809b91e.js.map