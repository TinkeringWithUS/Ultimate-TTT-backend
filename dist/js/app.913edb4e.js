(function(){"use strict";var e={3949:function(e,t,n){var o=n(9963),a=n(6252);function r(e,t){const n=(0,a.up)("router-view");return(0,a.wg)(),(0,a.j4)(n)}var s=n(3744);const l={},i=(0,s.Z)(l,[["render",r]]);var d=i,c=n(2201);const m=e=>((0,a.dD)("data-v-6552a167"),e=e(),(0,a.Cn)(),e),u={id:"home-view"},p={class:"names"},y={class:"name-display"},g=m((()=>(0,a._)("input",{type:"submit",value:"",class:"name-submit"},null,-1)));function h(e,t,n,r,s,l){const i=(0,a.up)("router-link"),d=(0,a.up)("RouterLink");return(0,a.wg)(),(0,a.iD)("div",u,[(0,a._)("nav",null,[(0,a.Wm)(i,{to:"/"},{default:(0,a.w5)((()=>[(0,a.Uk)("Home")])),_:1}),(0,a.Uk)(" | "),(0,a.Wm)(i,{to:"/about"},{default:(0,a.w5)((()=>[(0,a.Uk)("About")])),_:1})]),(0,a._)("div",p,[(0,a._)("div",y,[(0,a._)("form",{method:"post",onSubmit:t[1]||(t[1]=(0,o.iM)(((...e)=>l.setName&&l.setName(...e)),["prevent"]))},[(0,a.wy)((0,a._)("input",{type:"text","onUpdate:modelValue":t[0]||(t[0]=e=>s.playerOneName=e),name:"player-one-name",placeholder:"Name",autocomplete:"off",class:"name-input"},null,512),[[o.nr,s.playerOneName]]),g],32)]),(0,a.Wm)(d,{to:"/game"},{default:(0,a.w5)((()=>[(0,a.Uk)("Go to Game")])),_:1})])])}n(7658);const b="player one",f="player two",w=9,S=9,v="continue",I="draw",_=10,P="initialize",G="new move",T="reset";var O=n(2262),B=n(6958);const C="http://localhost:3000",k=(0,O.qj)({isConnected:!1,errorMessage:null,nextMove:{player:b,tileId:-1,gameStatus:null}}),E={autoConnect:!1},N=(0,B.io)(C,E);function D(){return N.connect(),console.log("Calling connect Socket. connexion status: "+k.isConnected),k.isConnected}function x(){return N.disconnect(),console.log("Disconnecting socket"),k.isConnected=!1,k.isConnected}function K(e,t,n){return!!(k.isConnected||!k.isConnected&&D())&&(N.emit(e,{tileId:t,boardId:n}),!0)}function M(e){N.on(P,(t=>{const{playerKey:n,playerSymbol:o,opponentSymbol:a,roomId:r}=t;console.log("initial data: "+t+" stringified: "+JSON.stringify(t)),e.playerStorageKey=n,e.playerSymbol=o,e.playerStorageKey===b?e.opponentKey=f:e.opponentKey=b,e.opponentSymbol=String(a),e.isPlayerTurn=e.playerStorageKey===b,e.setAllBoardEnableStatus(e.playerStorageKey===b),console.log("this player's storage key: "+e.playerStorageKey+" opponent symbol: "+a),localStorage.setItem("player key",n),localStorage.setItem("game room",r)}))}function j(e){N.on(G,(t=>{console.log("client New move received. moveInfo id: "+t.moveId);const{moveId:n,boardId:o,gameStatus:a}=t;e.nextBoardToPlay=n,e.metaGameState[n].isEnabled=!0,e.opponentMove={tileId:n,boardId:o},e.isPlayerTurn=!0,e.placeTile({tileId:n,boardId:o},!1),null!==a&&(e.setEndGameStatus(a),e.setAllBoardEnableStatus(!1))}))}N.on("connect_error",(e=>{k.isConnected=!1,console.log("failed to connect"),k.errorMessage=`error name: ${e.name}. error message: ${e.message}`})),N.on("connect",(()=>{if(k.isConnected=!0,console.log("client is connected. connexion status: "+k.isConnected),null!=localStorage.getItem("game room")){const e=localStorage.getItem("player key"),t={playerKey:e,gameId:localStorage.getItem("game room")};N.emit("rejoin",t)}})),N.on("disconnect",(()=>{k.isConnected=!1,console.log("client has disconnected"),null!=localStorage.getItem("game room")&&localStorage.removeItem("game room")}));var A={data(){return{playerOneName:"",newName:!1,newPlayerOneName:!1}},methods:{setName(){const e=C+"/login";fetch(e,{method:"POST",mode:"cors",headers:{"Content-Type":"text/plain"},body:this.playerOneName}).then((e=>e.text())).then((e=>{console.log("response from server "+e),"good name"===e?(Me.push("/game"),console.log("good name")):console.log("bad name")})).catch((e=>{console.log("error when posting login error msg: "+e.message)}))}},mounted(){const e=sessionStorage.getItem(b);null!==e&&(this.playerOneName=e)},unmounted(){sessionStorage.setItem(b,this.playerOneName)}};const W=(0,s.Z)(A,[["render",h],["__scopeId","data-v-6552a167"]]);var q=W,U=n(3577);const $=e=>((0,a.dD)("data-v-5f7bbe43"),e=e(),(0,a.Cn)(),e),Z={class:"player-controls"},z=$((()=>(0,a._)("label",{for:"player-one-symbol"},"Player One Custom Symbol",-1))),R=$((()=>(0,a._)("br",null,null,-1))),H=$((()=>(0,a._)("label",{for:"player-two-symbol"},"Player Two Custom Symbol",-1))),L={class:"game"},V={key:0,class:"outcome-display"},Y={class:"outcome-text"},J={class:"username"},F={class:"username"},X=$((()=>(0,a._)("div",{class:"history"},[(0,a._)("ul",{class:"moves-list"})],-1)));function Q(e,t,n,r,s,l){const i=(0,a.up)("meta-board"),d=(0,a.up)("connect-display");return(0,a.wg)(),(0,a.iD)(a.HY,null,[(0,a._)("div",Z,[z,(0,a.wy)((0,a._)("input",{type:"text",name:"player-one-symbol",id:"player-one-symbol","onUpdate:modelValue":t[0]||(t[0]=e=>s.firstPlayer=e)},null,512),[[o.nr,s.firstPlayer]]),R,H,(0,a.wy)((0,a._)("input",{type:"text",name:"player-two-symbol",id:"player-two-symbol","onUpdate:modelValue":t[1]||(t[1]=e=>s.secondPlayer=e)},null,512),[[o.nr,s.secondPlayer]])]),(0,a._)("div",L,[null!==s.winner?((0,a.wg)(),(0,a.iD)("div",V,[(0,a._)("p",Y,(0,U.zw)(l.outcomeText),1),(0,a._)("button",{type:"button",onClick:t[2]||(t[2]=(...e)=>l.resetGame&&l.resetGame(...e)),class:"reset-button"}," Play Again ")])):(0,a.kq)("",!0),(0,a._)("p",J,(0,U.zw)(s.playerOneName),1),(0,a.Wm)(i,{onGameOver:t[3]||(t[3]=e=>l.gameOver(e)),onDraw:l.handleDraw,onResetted:l.finishReset,"player-one":s.firstPlayer,"player-two":s.secondPlayer,"reset-signal":s.resetSignal,class:"board"},null,8,["onDraw","onResetted","player-one","player-two","reset-signal"]),(0,a._)("p",F,(0,U.zw)(s.playerTwoName),1)]),X,(0,a.Wm)(d)],64)}const ee={class:"meta-board"};function te(e,t,n,o,r,s){const l=(0,a.up)("GameBoard");return(0,a.wg)(),(0,a.iD)("div",null,[(0,a._)("div",ee,[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(r.metaGameState,(e=>((0,a.wg)(),(0,a.j4)(l,{key:e.id,onTilePlaced:t[0]||(t[0]=e=>s.placeTile(e,!0)),onGameOver:t[1]||(t[1]=e=>s.setBoardStatus(e)),onDraw:t[2]||(t[2]=e=>s.setBoardStatus(e)),"opponent-player-symbol":r.opponentSymbol,"opponent-move":r.opponentMove,"client-player-symbol":r.playerSymbol,"reset-signal":n.resetSignal,"is-enabled":e.isEnabled,"board-id":e.id,class:"game-board"},null,8,["opponent-player-symbol","opponent-move","client-player-symbol","reset-signal","is-enabled","board-id"])))),128))])])}const ne={class:"board-container"},oe={key:0,class:"end-display"};function ae(e,t,n,o,r,s){const l=(0,a.up)("game-tile");return(0,a.wg)(),(0,a.iD)("div",ne,[(0,a._)("div",{class:(0,U.C_)(["game-board",{active:n.isEnabled}])},[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(r.GameBoard,(e=>((0,a.wg)(),(0,a.j4)(l,{key:e.id,ownerSymbol:e.owner,id:e.id,onPlaceTile:t=>s.placeTile(e.id,!0)},null,8,["ownerSymbol","id","onPlaceTile"])))),128))],2),null!==r.winner?((0,a.wg)(),(0,a.iD)("div",oe,(0,U.zw)(r.winner),1)):(0,a.kq)("",!0)])}function re(e,t,n,o,r,s){return(0,a.wg)(),(0,a.iD)("div",{class:"tile",onClick:t[0]||(t[0]=(...e)=>s.setOwner&&s.setOwner(...e))},(0,U.zw)(s.displaySymbol),1)}const se="";var le={emits:["place-tile"],props:{ownerSymbol:{required:!0,type:String},id:{required:!0,type:String}},methods:{setOwner(){const e=this.id;this.ownerSymbol===e&&this.$emit("place-tile")}},computed:{displaySymbol(){return this.ownerSymbol===this.id?se:this.ownerSymbol}}};const ie=(0,s.Z)(le,[["render",re],["__scopeId","data-v-2508832b"]]);var de=ie;const ce="D";var me={components:{GameTile:de},emits:["tile-placed","game-over","resetted"],props:{clientPlayerSymbol:{required:!0,type:String},opponentPlayerSymbol:{required:!0,type:String},opponentMove:{required:!0,type:Object},isEnabled:{default:!1,type:Boolean},boardId:{required:!0,type:Number},resetSignal:{default:!1,type:Boolean}},data(){let e=[];for(let t=0;t<S;t++)e.push({owner:String(t),id:String(t)});return{GameBoard:e,DRAW:ce,winner:null,tilesPlaced:0}},methods:{resetBoard(){for(const e of this.GameBoard)e.owner=e.id;this.tilesPlaced=0,this.winner=null},placeTile(e,t){console.log("game board tile id: "+e);let n=this.GameBoard[e];n.owner!==n.id||null!==this.winner||!this.isEnabled&&t?console.log("failed to place tile. winner: "+this.winner+" is enabled: "+this.isEnabled+" and owner: "+n.owner):(this.tilesPlaced++,n.owner=t?this.clientPlayerSymbol:this.opponentPlayerSymbol,t&&this.$emit("tile-placed",{tileId:e,boardId:this.boardId}),this.winner=this.getWinner(),null!==this.winner&&this.$emit("game-over",{status:this.winner,boardId:this.boardId}))},getWinner(){if(this.tilesPlaced===S)return ce;let e=[[0,1,2],[3,4,5],[6,7,8],[0,3,6],[1,4,7],[2,5,8],[0,4,8],[2,4,6]];for(const t of e){let e=!1,n=this.GameBoard[t[0]].owner;for(let o=0;o<t.length;o++){let a=this.GameBoard[t[o]].owner;if(e=a===n,!e)break}if(e)return n}return null}},watch:{resetSignal:function(e){e&&(this.resetBoard(),this.$emit("resetted"))},opponentMove:function(e){console.log("new opponent move: "+JSON.stringify(e));const{tileId:t,boardId:n}=e;n===this.boardId&&this.placeTile(Number(t),!1)}}};const ue=(0,s.Z)(me,[["render",ae],["__scopeId","data-v-223ca7a5"]]);var pe=ue;const ye=_;var ge={components:{GameBoard:pe},emits:["game-over","resetted","draw"],props:{playerOne:{required:!0,type:String},playerTwo:{required:!0,type:String},resetSignal:{default:!1,type:Boolean}},data(){let e=[],t=[I,this.playerOne,this.playerTwo];for(let o=0;o<w;o++)e.push({id:o,isEnabled:!0,status:v});let n={tileId:-1,boardId:-1};return{metaGameState:e,endGameStates:t,startTimeSeconds:ye,opponentMove:n,opponentKey:"",opponentSymbol:"",isPlayerTurn:!1,playerStorageKey:"",playerSymbol:"",boardsInPlay:w,serverGameState:k,currentGameState:null,nextBoardToPlay:-1}},methods:{placeTile({tileId:e,boardId:t},n){this.nextBoardToPlay=Number(e);let o=this.metaGameState[this.nextBoardToPlay];if(this.setAllBoardEnableStatus(!0),console.log("meta board. nextboard status: "+o.status),!this.endGameStates.includes(o.status))for(let a=0;a<this.metaGameState.length;a++)this.metaGameState[a].isEnabled=this.nextBoardToPlay===a;console.log("Sending move"),n&&(K(this.playerStorageKey,e,t),this.isPlayerTurn=!1),!this.isPlayerTurn&&n&&this.setAllBoardEnableStatus(!1)},setBoardStatus(e){let t=Number(e.boardId);this.metaGameState[t].status=e.status,this.boardsInPlay--;const n=this.getWinner(this.boardsInPlay);this.endGameStates.includes(n)&&(this.setAllBoardEnableStatus(!1),this.setEndGameStatus(n))},getWinner(e){if(0===e)return I;let t=[[0,1,2],[3,4,5],[6,7,8],[0,3,6],[1,4,7],[2,5,8],[0,4,8],[2,4,6]];for(const n of t){let e=!1,t=this.metaGameState[n[0]].status;for(let o=0;o<n.length;o++){let a=this.metaGameState[n[o]].status;if(e=a===t,!e)break}if(e)return t}return null},handleTimeLoss(e){e===this.playerOne?this.setEndGameStatus(this.playerTwo):e===this.playerTwo&&this.setEndGameStatus(this.playerOne),this.setAllBoardEnableStatus(!1)},setEndGameStatus(e){this.currentGameState=e},setAllBoardEnableStatus(e){for(const t of this.metaGameState)t.isEnabled=e}},watch:{currentGameState:function(e){if(null!==e){const t=e===I?I:"game-over";this.$emit(t,e)}},resetSignal:function(e){if(e){for(const e of this.metaGameState)e.status=v,e.isEnabled=!0;this.playerOneTurn=this.playerStorageKey===b,this.boardsInPlay=w,this.nextBoardToPlay=-1,N.emit(T),this.setEndGameStatus(null),this.$emit("resetted")}}},mounted(){M(this),j(this)}};const he=(0,s.Z)(ge,[["render",te],["__scopeId","data-v-ec15f4f8"]]);var be=he;const fe={class:"connected-display"};function we(e,t,n,o,r,s){return(0,a.wg)(),(0,a.iD)("footer",fe,(0,U.zw)(s.connectedMessage),1)}var Se={data(){return{isConnected:k.isConnected}},computed:{connectedMessage(){let e=k.isConnected?"Connected: ✔️":"Disconnected ❌";return console.log("connect display connected status: "+k.isConnected+" and msg: "+e),e}}};const ve=(0,s.Z)(Se,[["render",we],["__scopeId","data-v-4eeae40e"]]);var Ie=ve;const _e="X",Pe="O";var Ge={components:{MetaBoard:be,ConnectDisplay:Ie},data(){return{winner:null,resetSignal:!1,playerOneName:_e,playerTwoName:Pe,firstPlayer:_e,secondPlayer:Pe,numTiles:9}},methods:{gameOver(e){this.winner=e,console.log("GAME OVER CALLLED "+e)},handleDraw(){this.winner="draw"},resetGame(){this.winner=null,this.resetSignal=!0,this.firstPlayer=_e,this.secondPlayer=Pe},finishReset(){this.resetSignal=!1}},computed:{outcomeText(){let e="";return e=this.winner===this.firstPlayer?this.playerOneName:this.playerTwoName,`${e} has won!`}},mounted(){b in sessionStorage&&(this.playerOneName=sessionStorage.getItem(b)),f in sessionStorage&&(this.playerTwoName=sessionStorage.getItem(f)),D()},unmounted(){x()}};const Te=(0,s.Z)(Ge,[["render",Q],["__scopeId","data-v-5f7bbe43"]]);var Oe=Te;const Be=(0,a._)("p",null," Ultimate Tic Tac Toe Game! ",-1),Ce=(0,a._)("br",null,null,-1);function ke(e,t){const n=(0,a.up)("router-link");return(0,a.wg)(),(0,a.iD)("main",null,[Be,(0,a.Wm)(n,{to:"/game"},{default:(0,a.w5)((()=>[(0,a.Uk)("Game")])),_:1}),Ce,(0,a.Wm)(n,{to:"/"},{default:(0,a.w5)((()=>[(0,a.Uk)("Home")])),_:1})])}const Ee={},Ne=(0,s.Z)(Ee,[["render",ke]]);var De=Ne;const xe=[{path:"/",component:q},{path:"/game",component:Oe},{path:"/about",component:De}],Ke=(0,c.p7)({history:(0,c.PO)("/"),routes:xe});var Me=Ke;(0,o.ri)(d).use(Me).mount("#app")}},t={};function n(o){var a=t[o];if(void 0!==a)return a.exports;var r=t[o]={exports:{}};return e[o].call(r.exports,r,r.exports,n),r.exports}n.m=e,function(){var e=[];n.O=function(t,o,a,r){if(!o){var s=1/0;for(c=0;c<e.length;c++){o=e[c][0],a=e[c][1],r=e[c][2];for(var l=!0,i=0;i<o.length;i++)(!1&r||s>=r)&&Object.keys(n.O).every((function(e){return n.O[e](o[i])}))?o.splice(i--,1):(l=!1,r<s&&(s=r));if(l){e.splice(c--,1);var d=a();void 0!==d&&(t=d)}}return t}r=r||0;for(var c=e.length;c>0&&e[c-1][2]>r;c--)e[c]=e[c-1];e[c]=[o,a,r]}}(),function(){n.d=function(e,t){for(var o in t)n.o(t,o)&&!n.o(e,o)&&Object.defineProperty(e,o,{enumerable:!0,get:t[o]})}}(),function(){n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){var e={143:0};n.O.j=function(t){return 0===e[t]};var t=function(t,o){var a,r,s=o[0],l=o[1],i=o[2],d=0;if(s.some((function(t){return 0!==e[t]}))){for(a in l)n.o(l,a)&&(n.m[a]=l[a]);if(i)var c=i(n)}for(t&&t(o);d<s.length;d++)r=s[d],n.o(e,r)&&e[r]&&e[r][0](),e[r]=0;return n.O(c)},o=self["webpackChunktic_tac_toe_ui"]=self["webpackChunktic_tac_toe_ui"]||[];o.forEach(t.bind(null,0)),o.push=t.bind(null,o.push.bind(o))}();var o=n.O(void 0,[998],(function(){return n(3949)}));o=n.O(o)})();
//# sourceMappingURL=app.913edb4e.js.map